<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC   "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd"
>

<mapper namespace="com.back.teammate.dao.TeammateDAO">
   	<!-- list 출력 -->
   	<select id="list" resultType="com.back.teammate.dto.TeammateDTO">
	   SELECT
	   	   tj.join_team_idx
		   ,t.logo
		   ,t.team_name
		   ,t.id
		   ,t.team_address
		   ,tj.join_team_position
		   ,tj.join_team_level
	   FROM team t, team_join tj
	   WHERE t.team_idx = tj.team_idx
	   LIMIT #{param1}, 10
   	</select>
   
   	<!-- 레벨 필터 list 출력 -->
   	<select id="listFilterLevel" resultType="com.back.teammate.dto.TeammateDTO">
	   SELECT
	   	   tj.join_team_idx
		   ,t.logo
		   ,t.team_name
		   ,t.id
		   ,t.team_address
		   ,tj.join_team_position
		   ,tj.join_team_level
	   FROM team t, team_join tj
	   WHERE t.team_idx = tj.team_idx
	   AND tj.join_team_level LIKE CONCAT('%', #{param2}, '%')
	   LIMIT #{param1}, 10
   	</select>
   
   	<!-- 포지션 필터 list 출력 -->
   	<select id="listFilterPosition" resultType="com.back.teammate.dto.TeammateDTO">
	   SELECT
	   		tj.join_team_idx
	 	   ,t.logo
		   ,t.team_name
		   ,t.id
		   ,t.team_address
		   ,tj.join_team_position
		   ,tj.join_team_level
	   FROM team t, team_join tj
	   WHERE t.team_idx = tj.team_idx
	   AND tj.join_team_position LIKE CONCAT('%', #{param2}, '%')
	   LIMIT #{param1}, 10
   	</select>
   
   	<!-- 포지션,레벨 필터 list 출력 -->
   	<select id="listFilterPosotionLevel" resultType="com.back.teammate.dto.TeammateDTO">
	   SELECT
	   		tj.join_team_idx
	   		,t.logo
		   ,t.team_name
		   ,t.id
		   ,t.team_address
		   ,tj.join_team_position
		   ,tj.join_team_level
	   FROM team t, team_join tj
	   WHERE t.team_idx = tj.team_idx
	   AND tj.join_team_position LIKE CONCAT(#{param2})
	   AND tj.join_team_level LIKE CONCAT(#{param3})
	   LIMIT #{param1}, 10
   	</select>
   
   	<!-- 주소 필터 list 출력 -->
   	<select id="listFilterAddress" resultType="com.back.teammate.dto.TeammateDTO">
	   SELECT
	   		tj.join_team_idx
		   ,t.logo
		   ,t.team_name
		   ,t.id
		   ,t.team_address
		   ,tj.join_team_position
		   ,tj.join_team_level
	   FROM team t, team_join tj
	   WHERE t.team_idx = tj.team_idx
	   AND t.team_address LIKE CONCAT('%', #{param2}, '%')
	   LIMIT #{param1}, 10
   	</select>

   	<!-- 주소,레벨 필터 list 출력 -->
   	<select id="listFilterAddressLevel" resultType="com.back.teammate.dto.TeammateDTO">
	   SELECT
	   		tj.join_team_idx
		   ,t.logo
		   ,t.team_name
		   ,t.id
		   ,t.team_address
		   ,tj.join_team_position
		   ,tj.join_team_level
	   FROM team t, team_join tj
	   WHERE t.team_idx = tj.team_idx
	   AND t.team_address LIKE CONCAT('%', #{param2}, '%')
	   AND tj.join_team_level LIKE CONCAT(#{param3})
	   LIMIT #{param1}, 10
   	</select>
   
   	<!-- 주소,포지션 필터 list 출력 -->
   	<select id="listFilterAddressPosition" resultType="com.back.teammate.dto.TeammateDTO">
	   SELECT
	   		tj.join_team_idx
		   ,t.logo
		   ,t.team_name
		   ,t.id
		   ,t.team_address
		   ,tj.join_team_position
		   ,tj.join_team_level
	   FROM team t, team_join tj
	   WHERE t.team_idx = tj.team_idx
	   AND t.team_address LIKE CONCAT('%', #{param2}, '%')
	   AND tj.join_team_position LIKE CONCAT(#{param3})
	   LIMIT #{param1}, 10
   	</select>
   
   	<!-- 주소,포지션,레벨 필터 list 출력 -->
   	<select id="listFilterAddressPositionLevel" resultType="com.back.teammate.dto.TeammateDTO">
	   SELECT
	   		tj.join_team_idx
		   ,t.logo
		   ,t.team_name
		   ,t.id
		   ,t.team_address
		   ,tj.join_team_position
		   ,tj.join_team_level
	   FROM team t, team_join tj
	   WHERE t.team_idx = tj.team_idx
	   AND t.team_address LIKE CONCAT('%', #{param2}, '%')
	   AND tj.join_team_position LIKE CONCAT(#{param3})
	   AND tj.join_team_level LIKE CONCAT(#{param4})
	   LIMIT #{param1}, 10
   	</select>
   
   	<!-- allList 출력 -->
   	<select id="allList" resultType="com.back.teammate.dto.TeammateDTO">
	   SELECT
	  		tj.join_team_idx
		   ,t.logo
		   ,t.team_name
		   ,t.id
		   ,t.team_address
		   ,tj.join_team_position
		   ,tj.join_team_level
	   FROM team t, team_join tj
	   WHERE t.team_idx = tj.team_idx
   	</select>
   
  	<!-- 토탈 페이지 수 -->
	<select id="allTeammateCount" resultType="int">
		  SELECT CEIL(COUNT(join_team_idx)/10) AS totalPage
		  FROM team_join
	</select>

	<!-- 레벨 필터 후 토탈 페이지 수 -->
	<select id="levelFilteringTeammateCount" resultType="int">
		SELECT CEIL(COUNT(join_team_idx)/10) AS totalPage 
		FROM team_join tj
		JOIN team t
		ON t.team_idx = tj.team_idx
		WHERE tj.join_team_level LIKE CONCAT('%', #{param1}, '%')
	</select>
	
	<!-- 포지션 필터 후 토탈 페이지 수 -->
	<select id="positionFilteringTeammateCount" resultType="int">
		SELECT CEIL(COUNT(join_team_idx)/10) AS totalPage 
		FROM team_join tj
		JOIN team t
		ON t.team_idx = tj.team_idx
		WHERE tj.join_team_position LIKE CONCAT('%', #{param1}, '%')
	</select>
	
	<!-- 포지션, 레벨 필터 후 토탈 페이지 수 -->
	<select id="positionLevelFilteringTeammateCount" resultType="int">
		SELECT CEIL(COUNT(join_team_idx)/10) AS totalPage 
		FROM team_join tj
		JOIN team t
		ON t.team_idx = tj.team_idx
		WHERE  tj.join_team_position LIKE CONCAT('%', #{param1}, '%')
		AND tj.join_team_level LIKE CONCAT('%', #{param2}, '%')
	</select>
	
	<!--지역 필터 후 토탈 페이지 수 -->
	<select id="addressFilteringTeammateCount" resultType="int">
		SELECT CEIL(COUNT(join_team_idx)/10) AS totalPage 
		FROM team_join tj
		JOIN team t
		ON t.team_idx = tj.team_idx
		WHERE  t.team_address LIKE CONCAT('%', #{param1}, '%')
	</select>

	<!--지역,레벨 필터 후 토탈 페이지 수 -->
	<select id="addressLevelFilteringTeammateCount" resultType="int">
		SELECT CEIL(COUNT(join_team_idx)/10) AS totalPage 
		FROM team_join tj
		JOIN team t
		ON t.team_idx = tj.team_idx
		WHERE  t.team_address LIKE CONCAT('%', #{param1}, '%')
		AND tj.join_team_level LIKE CONCAT('%', #{param2}, '%')
	</select>
	
	<!--지역,포지션 필터 후 토탈 페이지 수 -->
	<select id="addressPositionFilteringTeammateCount" resultType="int">
		SELECT CEIL(COUNT(join_team_idx)/10) AS totalPage 
		FROM team_join tj
		JOIN team t
		ON t.team_idx = tj.team_idx
		WHERE  t.team_address LIKE CONCAT('%', #{param1}, '%')
		AND tj.join_team_position LIKE CONCAT('%', #{param2}, '%')
	</select>

	<!--지역,포지션,레벨 모든 필터 후 토탈 페이지 수 -->
	<select id="allFilteringTeammateCount" resultType="int">
		SELECT CEIL(COUNT(join_team_idx)/10) AS totalPage 
		FROM team_join tj
		JOIN team t
		ON t.team_idx = tj.team_idx
		WHERE  t.team_address LIKE CONCAT('%', #{param1}, '%')
		AND tj.join_team_position LIKE CONCAT('%', #{param2}, '%')
		AND tj.join_team_level LIKE CONCAT('%', #{param3}, '%')
	</select>

	<!-- 팀 활동지역 검색 list 출력 -->
	<select id="addressSearchList" resultType="com.back.teammate.dto.TeammateDTO">
	   SELECT
	   		tj.join_team_idx
		   ,t.logo
		   ,t.team_name
		   ,t.id
		   ,t.team_address
		   ,tj.join_team_position
		   ,tj.join_team_level
	   FROM team t, team_join tj
	   WHERE t.team_idx = tj.team_idx
	   AND t.team_address LIKE CONCAT('%', #{param1}, '%')
	   LIMIT #{param2}, 10
	</select>
	
	<!-- 팀명 검색 list 출력 -->
	<select id="teamnameSearchList" resultType="com.back.teammate.dto.TeammateDTO">
	   SELECT
	   		tj.join_team_idx
		   ,t.logo
		   ,t.team_name
		   ,t.id
		   ,t.team_address
		   ,tj.join_team_position
		   ,tj.join_team_level
	   FROM team t, team_join tj
	   WHERE t.team_idx = tj.team_idx
	   AND t.team_name LIKE CONCAT('%', #{param1}, '%')
	   LIMIT #{param2}, 10
	</select>
	
	<!-- 팀장명 검색 list 출력 -->
	<select id="representSearchList" resultType="com.back.teammate.dto.TeammateDTO">
	   SELECT
	   		tj.join_team_idx
		   ,t.logo
		   ,t.team_name
		   ,t.id
		   ,t.team_address
		   ,tj.join_team_position
		   ,tj.join_team_level
	   FROM team t, team_join tj
	   WHERE t.team_idx = tj.team_idx
	   AND t.id LIKE CONCAT('%', #{param1}, '%')
	   LIMIT #{param2}, 10
	</select>

	<!-- 팀 활동지역 검색 후 토탈 페이지 출력 -->
	<select id="addressFilteringCount" resultType="int">
		SELECT CEIL(COUNT(join_team_idx)/10) AS totalPage
		 FROM team_join tj
		 JOIN team t
		 ON t.team_idx = tj.team_idx
		 WHERE t.team_address LIKE CONCAT('%', #{param1}, '%')
	</select>
	
	<!-- 팀명 검색 후 토탈 페이지 출력 -->
	<select id="teamnameFilteringCount" resultType="int">
		SELECT CEIL(COUNT(join_team_idx)/10) AS totalPage
		 FROM team_join tj
		 JOIN team t
		 ON t.team_idx = tj.team_idx
		 WHERE t.team_name LIKE CONCAT('%', #{param1}, '%')
	</select>
	
	<!-- 팀장명 검색 후 토탈 페이지 출력 -->
	<select id="representFilteringCount" resultType="int">
		SELECT CEIL(COUNT(join_team_idx)/10) AS totalPage
		 FROM team_join tj
		 JOIN team t
		 ON t.team_idx = tj.team_idx
		 WHERE t.id LIKE CONCAT('%', #{param1}, '%')
	</select>
	
	<select id="teammateDetail" resultType="com.back.teammate.dto.TeammateDTO">
	SELECT
		t.logo
		,t.team_name
		,t.id
		,t.team_address
		,tj.join_team_level
		,tj.join_team_gender
		,tj.join_team_position
		,tj.join_team_content
	FROM team t
	JOIN team_join tj
	ON t.team_idx = tj.team_idx
	WHERE tj.join_team_idx = #{param1}
	</select>
	
</mapper>
